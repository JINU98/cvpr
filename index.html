<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CVPR Countdown â€” Oct 24 (AoE)</title>
  <meta name="theme-color" content="#0a0f1f" />
  <style>
    :root{
      --bg1:#0b1025; --bg2:#0b1f3a; --neon:#7ee0ff; --accent:#ff6ad5;
      --glow: 0 0 20px rgba(126,224,255,.6), 0 0 60px rgba(126,224,255,.3);
      --glass: rgba(255,255,255,.08); --border: rgba(255,255,255,.22);
      --ok:#7cffc4; --warn:#ffd166; --danger:#ff6b6b;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; color:#e8f7ff; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 60%),
                  radial-gradient(1000px 700px at 80% 90%, #071126, transparent 50%),
                  linear-gradient(180deg, var(--bg1), #060a17 85%);
      overflow:hidden;
    }
    .stars,.twinkles{position:fixed;inset:0;pointer-events:none;background-repeat:repeat}
    .stars{
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.55) 50%, transparent 51%),
        radial-gradient(1px 1px at 70% 40%, rgba(255,255,255,.4) 50%, transparent 51%),
        radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.35) 50%, transparent 51%),
        radial-gradient(1px 1px at 90% 70%, rgba(255,255,255,.5) 50%, transparent 51%),
        radial-gradient(1px 1px at 50% 10%, rgba(255,255,255,.32) 50%, transparent 51%);
      animation: drift 120s linear infinite; opacity:.6;
    }
    .twinkles{
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.3) 50%, transparent 51%),
        radial-gradient(2px 2px at 80% 60%, rgba(255,255,255,.25) 50%, transparent 51%),
        radial-gradient(2px 2px at 40% 85%, rgba(255,255,255,.22) 50%, transparent 51%);
      animation: twinkle 6s ease-in-out infinite; mix-blend-mode: screen;
    }
    @keyframes drift{from{transform:translateY(0)}to{transform:translateY(-200px)}}
    @keyframes twinkle{0%,100%{opacity:.15}50%{opacity:.45}}
    main{min-height:100%;display:grid;place-items:center;padding:clamp(16px,3vw,32px)}
    .card{
      position:relative;width:min(980px,92vw);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--border); border-radius:24px;
      backdrop-filter: blur(10px) saturate(1.2);
      box-shadow: 0 20px 60px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.04);
      padding:clamp(20px,4vw,40px); overflow:hidden;
    }
    .glow-ring{position:absolute;inset:-2px;background:
      conic-gradient(from 180deg at 50% 50%, rgba(126,224,255,.0) 0deg, rgba(126,224,255,.35) 80deg, rgba(255,106,213,.35) 200deg, rgba(126,224,255,.0) 360deg);
      filter: blur(24px); opacity:.25; z-index:0; animation:hue 12s linear infinite}
    @keyframes hue{from{filter:blur(24px) hue-rotate(0)}to{filter:blur(24px) hue-rotate(360deg)}}
    header{position:relative;z-index:1;display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:clamp(14px,2.5vw,24px)}
    .brand{display:flex;align-items:center;gap:14px;letter-spacing:.6px;text-transform:uppercase;font-weight:700;color:#d8f6ff}
    .badge{width:42px;height:42px;display:grid;place-items:center;border-radius:10px;background:radial-gradient(circle at 30% 20%, #143a5c,#0a1c30);box-shadow:var(--glow),inset 0 0 0 1px rgba(126,224,255,.35);font-size:20px}
    .deadline{font-size:clamp(14px,1.6vw,16px);color:#bfeaff;opacity:.9}
    .countdown{position:relative;z-index:1;display:grid;gap:clamp(8px,1vw,12px);text-align:center;margin:clamp(10px,1.5vw,18px) 0}
    .primary{font-weight:800;font-variant-numeric:tabular-nums;letter-spacing:.8px;line-height:1.05;font-size:clamp(38px,8vw,120px);text-shadow:0 4px 24px rgba(126,224,255,.35)}
    .primary .num{display:inline-block;padding:0 .18em;border-radius:.25em;background:linear-gradient(180deg, rgba(126,224,255,.12), rgba(126,224,255,.02));box-shadow:inset 0 0 0 2px rgba(126,224,255,.18), inset 0 0 24px rgba(126,224,255,.12);text-shadow:0 0 18px rgba(126,224,255,.35)}
    .sub{font-size:clamp(14px,2.1vw,24px);color:#cfefff;opacity:.95}
    .ticker{margin-top:8px;display:flex;align-items:center;justify-content:center;gap:14px;flex-wrap:wrap;color:#cfefff;font-variant-numeric:tabular-nums;font-size:clamp(12px,1.8vw,18px);opacity:.9}
    .chip{padding:8px 12px;border-radius:999px;background:var(--glass);border:1px solid var(--border)}
    .meter{position:relative;height:14px;width:100%;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:999px;overflow:hidden;margin-top:clamp(12px,2vw,18px)}
    .meter>i{position:absolute;inset:0;width:0%;background:linear-gradient(90deg,var(--accent),var(--neon));box-shadow:0 0 20px rgba(126,224,255,.5),0 0 40px rgba(255,106,213,.4);transition:width .6s cubic-bezier(.2,.8,.2,1)}
    footer{position:relative;z-index:1;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin-top:clamp(14px,2.5vw,22px);color:#bfeaff;font-size:clamp(12px,1.6vw,15px);opacity:.9}
    .pill{padding:6px 10px;border-radius:8px;background:var(--glass);border:1px solid var(--border)}
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip: rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}
    #confetti{position:fixed;inset:0;pointer-events:none;z-index:5}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="stars" aria-hidden="true"></div>
  <div class="twinkles" aria-hidden="true"></div>

  <main>
    <section class="card" role="region" aria-labelledby="title">
      <div class="glow-ring" aria-hidden="true"></div>

      <header>
        <div class="brand" id="title">
          <div class="badge" aria-hidden="true">ðŸ“„</div>
          <div>
            <div>CVPR Submission Countdown</div>
            <div class="deadline" id="deadlineLabel">Target: Oct 24, <span id="year"></span> â€” 11:59:59pm AoE (UTCâˆ’12)</div>
          </div>
        </div>
        <div class="pill" id="statusPill">Calculatingâ€¦</div>
      </header>

      <div class="countdown" aria-live="polite">
        <div class="primary" id="bigLine">
          <span class="num" id="weeks">0</span> weeks
          <span class="num" id="days">0</span> days
        </div>
        <div class="sub" id="subline">â€¦until the CVPR deadline.</div>

        <!-- Only DHM ticker -->
        <div class="ticker" id="ticker">
          <span class="chip" id="DHM">0d 00h 00m 00s</span>
        </div>

        <div class="meter" aria-hidden="true" title="Progress through the year toward the deadline">
          <i id="progress"></i>
        </div>
      </div>

      <footer>
        <span>Weeks+days are whole numbers (rounded down) based on full days remaining.</span>
        <!-- <span class="pill">Tip: Add <code>?year=2025</code> to force a specific year.</span> -->
      </footer>
    </section>
  </main>

  <script>
    (function(){
      // ===== Config =====
      const MS = { s:1000, m:60000, h:3600000, d:86400000 };
      const now = new Date();
      const params = new URLSearchParams(location.search);
      const forcedYear = params.get('year') ? parseInt(params.get('year'), 10) : null;

      // Next Oct 24 @ 23:59:59 AoE == UTC Oct 25 11:59:59
      const baseYear = forcedYear ?? now.getFullYear();
      const makeTarget = y => new Date(Date.UTC(y, 9, 25, 11, 59, 59)); // month index 9 = October
      let target = makeTarget(baseYear);
      if (!forcedYear && now > target) target = makeTarget(baseYear + 1);

      // ===== DOM =====
      const $ = id => document.getElementById(id);
      const weeksEl = $("weeks"), daysEl = $("days"),
            dhmEl = $("DHM"), statusPill = $("statusPill"),
            progressEl = $("progress"), yearEl = $("year");

      yearEl.textContent = target.getUTCFullYear();

      // ===== Helpers =====
      const clamp = (n,a,b)=>Math.max(a, Math.min(b,n));
      const fmt = (n, pad=2)=>String(Math.floor(n)).padStart(pad,"0");
      const progressToTarget = (nowLocal, targ)=>{
        const start = new Date(Date.UTC(targ.getUTCFullYear(), 0, 1, 0,0,0));
        const total = targ - start;
        const done = nowLocal - start;
        return clamp((done/total)*100, 0, 100);
      };

      // ===== Live countdown (every second, low-drift) =====
      function render(){
        const nowLocal = new Date();
        const diff = target - nowLocal;

        if (diff <= 0){
          weeksEl.textContent = "0";
          daysEl.textContent = "0";
          dhmEl.textContent = "0d 00h 00m 00s";
          statusPill.textContent = "ðŸŽ‰ Deadline reached!";
          statusPill.style.background = "linear-gradient(90deg, var(--ok), var(--accent))";
          statusPill.style.color = "#09111f";
          launchConfetti();
          return;
        }

        // Whole days left
        const totalDays = Math.floor(diff / MS.d);
        const weeks = Math.floor(totalDays / 7);
        const days  = totalDays % 7;

        // Remaining HH:MM:SS within the last day
        const remAfterDays = diff - totalDays*MS.d;
        const hours = Math.floor(remAfterDays / MS.h);
        const mins  = Math.floor((remAfterDays % MS.h) / MS.m);
        const secs  = Math.floor((remAfterDays % MS.m) / MS.s);

        weeksEl.textContent = weeks;
        daysEl.textContent  = days;
        dhmEl.textContent   = `${totalDays}d ${fmt(hours)}h ${fmt(mins)}m ${fmt(secs)}s`;

        // Status tone & progress
        let tone = "--neon";
        if (totalDays <= 14) tone = "--warn";
        if (totalDays <= 3)  tone = "--danger";
        statusPill.textContent = totalDays > 0 ? `${totalDays} full day${totalDays===1?'':'s'} left` : "Less than a day!";
        statusPill.style.boxShadow = `0 0 24px var(${tone})`;
        statusPill.style.color = "#09111f";
        statusPill.style.background = `linear-gradient(90deg, var(${tone}), #b3e9ff)`;

        const pct = progressToTarget(nowLocal, target);
        progressEl.style.width = pct.toFixed(2) + "%";
      }

      // Tick every second, correcting drift using setTimeout scheduling
      (function tick(){
        render();
        // schedule next tick aligned close to the next full second boundary
        const nowPerf = performance.now();
        const delay = 1000 - (Math.floor(nowPerf) % 1000);
        setTimeout(tick, Math.max(200, delay)); // never less than 200ms to avoid excessive calls
      })();

      // ===== Confetti (no libraries) =====
      const canvas = document.getElementById("confetti");
      const ctx = canvas.getContext("2d");
      let confetti = [], confettiTimer = null;

      function resizeCanvas(){
        canvas.width = innerWidth * devicePixelRatio;
        canvas.height = innerHeight * devicePixelRatio;
        ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
      }
      addEventListener("resize", resizeCanvas, { passive:true });
      resizeCanvas();

      function launchConfetti(durationMs = 5000, count = 180){
        if(confettiTimer) return;
        confetti = [];
        for(let i=0;i<count;i++){
          confetti.push({
            x: Math.random()*innerWidth,
            y: -20 - Math.random()*innerHeight*0.4,
            w: 6 + Math.random()*10,
            h: 8 + Math.random()*14,
            vx: -1 + Math.random()*2,
            vy: 2 + Math.random()*3,
            rot: Math.random()*Math.PI,
            vr: (-0.05 + Math.random()*0.1),
            hue: Math.random()*360
          });
        }
        const start = performance.now();
        function frame(t){
          const elapsed = t - start;
          ctx.clearRect(0,0,innerWidth,innerHeight);
          confetti.forEach(p=>{
            p.x += p.vx; p.y += p.vy; p.rot += p.vr;
            ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot);
            ctx.fillStyle = `hsl(${p.hue}, 90%, 60%)`;
            ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
            ctx.restore();
          });
          if(elapsed < durationMs){ confettiTimer = requestAnimationFrame(frame); }
          else { confettiTimer = null; ctx.clearRect(0,0,innerWidth,innerHeight); }
        }
        confettiTimer = requestAnimationFrame(frame);
      }

      // Respect reduced motion
      const mq = matchMedia("(prefers-reduced-motion: reduce)");
      if (mq.matches){
        document.querySelectorAll(".twinkles, .stars, .glow-ring").forEach(el => el.style.animation = "none");
      }
    })();
  </script>
</body>
</html>
